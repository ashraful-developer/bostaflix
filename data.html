<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://banglawebfonts.pages.dev/css/siyam-rupali.css" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Siyam Rupali', sans-serif; }

        body {
            width: 100vw; height: 100vh; display: flex; justify-content: center;
            align-items: center; overflow: hidden; background: #000;
        }

        .bg-blur {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: url('b.webp') no-repeat center center;
            background-size: cover; filter: blur(2.5vh); transform: scale(1.1); z-index: -1;
        }

        .outer-container {
            display: flex;
            align-items: center;
            width: 98vw;
            gap: 1vw;
            justify-content: center;
        }

        .slider-box {
            width: 82vw; height: 50vh; background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(2vh); border: 0.1vw solid rgba(255, 255, 255, 0.2);
            border-radius: 3vh; overflow: hidden; position: relative;
        }

        .wrapper {
            display: flex; height: 100%; transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .card {
            min-width: 100%; height: 100%; display: flex; align-items: center;
            padding: 3vh 3vw; gap: 3vw; cursor: pointer; text-decoration: none; color: white;
        }

        /* ছবির অংশ কিছুটা ছোট করা হয়েছে টেক্সটের জায়গা বাড়ানোর জন্য */
        .image-side {
            width: 25vw; height: 32vh; border-radius: 2vh; overflow: hidden;
            box-shadow: 0 1.5vh 3vh rgba(0,0,0,0.8); flex-shrink: 0;
        }

        .image-side img { width: 100%; height: 100%; object-fit: cover; pointer-events: none; }

        /* টেক্সট সাইড এখন অনেক বড় */
        .text-side {
            flex: 1; padding: 1vh;
            display: flex; flex-direction: column; justify-content: center;
        }

        .category {
            font-size: 1.1vw; color: #ff4757; font-weight: bold; margin-bottom: 2vh;
            display: inline-block; background: rgba(255, 255, 255, 0.1); padding: 0.6vh 1.2vw; border-radius: 0.5vh;
            align-self: flex-start;
        }

        /* শিরোনাম বড় এবং ৪ লাইন পর্যন্ত এলাউড */
        .heading {
            font-size: 3.2vw; /* ফন্ট সাইজ বাড়ানো হয়েছে */
            line-height: 1.3; font-weight: 800;
            text-shadow: 3px 3px 6px rgba(0,0,0,1);
            display: -webkit-box; 
            -webkit-line-clamp: 4; /* ৪ লাইন পর্যন্ত দেখাবে */
            -webkit-box-orient: vertical; 
            overflow: hidden;
            color: #fff;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.15); color: white; border: 1px solid rgba(255,255,255,0.3);
            width: 5vw; height: 5vw; border-radius: 50%; cursor: pointer;
            font-size: 2vw; transition: all 0.3s; flex-shrink: 0;
            display: flex; justify-content: center; align-items: center;
        }

        .nav-btn:hover { background: #ff4757; border-color: transparent; transform: scale(1.15); }

        /* মোবাইল রেসপন্সিভনেস */
        @media (max-aspect-ratio: 1/1) {
            .outer-container { flex-direction: column-reverse; gap: 2vh; }
            .slider-box { height: 65vh; width: 92vw; }
            .card { flex-direction: column; text-align: center; padding: 4vh 5vw; }
            .image-side { width: 100%; height: 28vh; }
            .text-side { align-items: center; width: 100%; }
            .category { align-self: center; font-size: 3.5vw; }
            .heading { font-size: 6vw; -webkit-line-clamp: 3; }
            .nav-btn { width: 14vw; height: 14vw; font-size: 8vw; }
        }
    </style>
</head>
<body>

<div class="bg-blur"></div>

<div class="outer-container">
    <button class="nav-btn" onclick="movePrev()">&#10094;</button>

    <div class="slider-box" id="sliderBox">
        <div id="card-wrapper" class="wrapper">
            <p style="color:white; text-align:center; width:100%; padding-top:15vh;">খবর লোড হচ্ছে...</p>
        </div>
    </div>

    <button class="nav-btn" onclick="moveNext()">&#10095;</button>
</div>

<script>
    const apiEndpoints = [
        'https://backoffice.channel24bd.tv/api/json/file/generateLatest.json',
        'https://backoffice.channel24bd.tv/api/json/file/generateSpecial1.json',
        'https://backoffice.channel24bd.tv/api/json/file/generateSpecial2.json'
    ];

    const wrapper = document.getElementById('card-wrapper');
    const sliderBox = document.getElementById('sliderBox');
    let currentIndex = 0;
    let items = [];
    let isPaused = false;
    let startX = 0;

    async function loadNews() {
        try {
            const res = await Promise.all(apiEndpoints.map(url => fetch(url).then(r => r.json())));
            let combined = res.flatMap(r => r.data);
            items = Array.from(new Set(combined.map(a => a.ContentID)))
                        .map(id => combined.find(a => a.ContentID === id))
                        .slice(0, 15);
            renderUI();
            startAutoSlide();
        } catch (e) {
            wrapper.innerHTML = `<p style="color:white; text-align:center; width:100%;">তথ্য লোড করা সম্ভব হয়নি।</p>`;
        }
    }

    function renderUI() {
        wrapper.innerHTML = items.map(item => {
            const link = `https://bostaflix.vercel.app/news/read.html?type=${item.Slug}&id=${item.ContentID}&image=${encodeURIComponent(item.ImageBgPath)}`;
            return `
            <a href="${link}" target="_top" class="card">
                <div class="image-side"><img src="https://backoffice.channel24bd.tv/media/imgAll/${item.ImageBgPath}"></div>
                <div class="text-side">
                    <span class="category">${item.CategoryName || 'সংবাদ'}</span>
                    <h2 class="heading">${item.ContentHeading}</h2>
                </div>
            </a>`;
        }).join('');
    }

    function moveNext() { currentIndex = (currentIndex + 1) % items.length; updateSlide(); }
    function movePrev() { currentIndex = (currentIndex - 1 + items.length) % items.length; updateSlide(); }
    function updateSlide() { wrapper.style.transform = `translateX(-${currentIndex * 100}%)`; }

    function startAutoSlide() {
        setInterval(() => { if (!isPaused) moveNext(); }, 8000);
    }

    sliderBox.addEventListener('mouseenter', () => isPaused = true);
    sliderBox.addEventListener('mouseleave', () => isPaused = false);

    sliderBox.addEventListener('touchstart', (e) => {
        startX = e.touches[0].clientX;
        isPaused = true;
    });

    sliderBox.addEventListener('touchend', (e) => {
        let endX = e.changedTouches[0].clientX;
        let diff = startX - endX;
        if (Math.abs(diff) > 50) {
            if (diff > 0) moveNext(); else movePrev();
        }
        isPaused = false;
    });

    loadNews();
</script>

</body>
</html>
